# ChatGPT风格引用功能使用说明

## 🎯 实现效果

现在AI聊天插件支持ChatGPT风格的引用功能：

### ✨ 句内引用标记
- AI回复中的每个事实后面会自动添加引用标记，如：`[1]` `[2]` `[3]`
- 引用标记会智能匹配相关内容，确保准确性

### 📚 可折叠引用列表
- 回复底部显示"参考来源 (数量)"，默认折叠
- 点击可展开查看完整的引用列表
- 每个引用包含：标题、域名、发布日期、摘要

## 🔧 如何触发引用功能

### 自动触发（推荐）
当你启用联网搜索后，AI会自动为合适的查询添加引用：

```
用户：谁是埃隆·马斯克？

AI回复：
埃隆·马斯克是一位企业家和工程师[1]，目前担任特斯拉CEO[2]和SpaceX创始人[3]。他出生于南非，后移居美国[1]...

参考来源 (3) ▼  [点击展开]
```

### 手动触发
你也可以明确要求AI提供引用：

```
请介绍埃隆·马斯克，并提供参考来源
给我关于iPhone 15的信息，要有引用链接
```

## 🎨 引用样式特点

### 句内标记
- `[1]` `[2]` `[3]` - 数字引用标记
- 自动插入到相关句子末尾
- 智能匹配关键词和概念

### 引用列表
- **默认折叠** - 保持界面简洁
- **可点击展开** - 查看详细信息
- **外部链接** - 直接跳转到原始来源
- **摘要预览** - 可展开查看内容摘要

## 🔍 引用匹配逻辑

AI会智能分析内容并添加引用：

1. **标题匹配** - 根据引用标题中的关键词匹配
2. **内容匹配** - 根据引用摘要中的概念匹配  
3. **智能插入** - 在相关句子末尾添加引用标记
4. **避免重复** - 每个引用只标记一次

## 📋 支持的引用类型

- **🌐 网页引用** - 来自网络搜索的结果
- **🖼️ 图片引用** - 来自图像搜索的结果
- **📄 文档引用** - 来自文档搜索的结果
- **📝 笔记引用** - 来自本地笔记的结果

## 🎯 最佳实践

### 获得最佳引用效果的查询方式：

✅ **好的查询**：
- "谁是埃隆·马斯克？"
- "介绍一下iPhone 15的特性"
- "什么是量子计算？"
- "2024年AI发展趋势"

❌ **不太适合的查询**：
- "你好"
- "今天天气怎么样？"
- "帮我写个代码"
- 纯创意性问题

### 提高引用准确性：
- 问具体的事实性问题
- 涉及人物、产品、概念、事件
- 需要最新信息的查询
- 要求权威来源的问题

## 🔧 配置选项

在AI聊天设置中，你可以：

- **启用/禁用引用功能** - 控制是否显示引用
- **设置引用数量** - 控制最大引用数量
- **选择搜索引擎** - 影响引用来源质量

## 🎨 界面交互

### 引用列表操作：
- **点击标题栏** - 折叠/展开整个引用列表
- **点击引用项** - 跳转到原始网页
- **点击摘要按钮** - 展开/收起引用摘要
- **悬停效果** - 高亮显示可交互元素

### 视觉设计：
- **数字标记** - 蓝色圆形背景，白色数字
- **类型图标** - 区分网页、图片、文档等类型
- **折叠动画** - 平滑的展开/收起效果
- **悬停反馈** - 鼠标悬停时的视觉反馈

## 🚀 高级功能

### 智能引用匹配
- 自动识别需要引用的内容类型
- 智能提取关键词进行匹配
- 避免过度引用或引用不足

### 多源引用整合
- 整合网络搜索和图像搜索结果
- 去重处理，避免重复引用
- 按相关性排序引用

### 引用质量优化
- 优先选择权威来源
- 过滤低质量或不相关的结果
- 提供完整的引用信息

---

**总结：** 现在你的AI聊天体验更加专业和可信，每个回复都有明确的来源支撑，就像使用ChatGPT一样！🎉