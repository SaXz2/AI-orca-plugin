# Skills è‡ªåŠ¨è¯†åˆ«æœºåˆ¶

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

**æ˜¯çš„ï¼Œç°åœ¨çš„ç³»ç»Ÿå°±æ˜¯è¿™æ ·çš„ï¼** 

ä½ å¯ä»¥ï¼š
- âœ… å¤åˆ¶ Skill æ–‡ä»¶å¤¹åˆ° `skills/` ç›®å½•
- âœ… è‡ªå·±æ‰‹å†™ Skill æ–‡ä»¶
- âœ… ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«å’ŒåŠ è½½

## ğŸ” è‡ªåŠ¨è¯†åˆ«åŸç†

### 1. æ‰«ææ–‡ä»¶å¤¹

```typescript
// listSkills() çš„å·¥ä½œæµç¨‹
export async function listSkills(): Promise<string[]> {
  const pluginName = getPluginName();
  try {
    // è·å–æ‰€æœ‰æ–‡ä»¶åˆ—è¡¨
    const entries = await orca.plugins.listFiles(pluginName);
    const skillIds = new Set<string>();

    for (const entry of entries) {
      // æ£€æŸ¥æ˜¯å¦åœ¨ skills ç›®å½•ä¸‹
      if (!entry.startsWith(`${SKILLS_ROOT}/`)) continue;

      // æå–æ–‡ä»¶å¤¹åç§°ï¼ˆSkill IDï¼‰
      const relative = entry.slice(SKILLS_ROOT.length + 1);
      const parts = relative.split("/");
      if (parts.length > 0 && parts[0]) {
        skillIds.add(parts[0]);  // æ·»åŠ åˆ°é›†åˆï¼ˆè‡ªåŠ¨å»é‡ï¼‰
      }
    }

    return Array.from(skillIds).sort();  // è¿”å›æ’åºåçš„åˆ—è¡¨
  } catch (err) {
    console.error("[SkillsManager] Failed to list skills:", err);
    return [];
  }
}
```

### 2. åŠ è½½ Skill è¯¦æƒ…

```typescript
// getSkill() çš„å·¥ä½œæµç¨‹
export async function getSkill(skillId: string): Promise<Skill | null> {
  const pluginName = getPluginName();

  try {
    // 1. è¯»å– SKILL.md æ–‡ä»¶
    const skillMdPath = buildSkillPath(skillId, SKILL_METADATA_FILE);
    const skillMdContent = await orca.plugins.readFile(pluginName, skillMdPath);

    if (!skillMdContent) {
      console.warn(`[SkillsManager] SKILL.md not found for skill: ${skillId}`);
      return null;
    }

    // 2. è§£æå…ƒæ•°æ®å’ŒæŒ‡ä»¤
    const contentStr = typeof skillMdContent === 'string' 
      ? skillMdContent 
      : new TextDecoder().decode(new Uint8Array(skillMdContent as ArrayBuffer));

    const { metadata, instruction } = parseSkillMetadata(contentStr);
    metadata.id = skillId;

    // 3. åˆ—å‡º Skill ä¸‹çš„æ‰€æœ‰æ–‡ä»¶
    const files = await listSkillFiles(skillId);

    // 4. æ£€æŸ¥æ˜¯å¦å¯ç”¨
    const enabled = await isSkillEnabled(skillId);

    // 5. è¿”å›å®Œæ•´çš„ Skill å¯¹è±¡
    return {
      id: skillId,
      metadata,
      instruction,
      files,
      enabled,
    };
  } catch (err) {
    console.error(`[SkillsManager] Failed to get skill ${skillId}:`, err);
    return null;
  }
}
```

## ğŸ“‹ Skill æ ¼å¼è¦æ±‚

### æœ€å°æ ¼å¼ï¼ˆå¿…éœ€ï¼‰

```markdown
---
name: æˆ‘çš„æŠ€èƒ½
---

# æŠ€èƒ½æŒ‡ä»¤

è¿™æ˜¯æˆ‘çš„æŠ€èƒ½æŒ‡ä»¤å†…å®¹ã€‚
```

### å®Œæ•´æ ¼å¼ï¼ˆæ¨èï¼‰

```markdown
---
id: my-skill
name: æˆ‘çš„æŠ€èƒ½
description: è¿™æ˜¯ä¸€ä¸ªè‡ªå®šä¹‰æŠ€èƒ½
version: 1.0.0
author: ç”¨æˆ·å
tags: [æ ‡ç­¾1, æ ‡ç­¾2]
---

# æˆ‘çš„æŠ€èƒ½

## å¿«é€Ÿå¼€å§‹

æè¿°å¦‚ä½•ä½¿ç”¨è¿™ä¸ªæŠ€èƒ½...

## åŠŸèƒ½ç‰¹æ€§

- ç‰¹æ€§1
- ç‰¹æ€§2

## ä½¿ç”¨åœºæ™¯

1. åœºæ™¯1
2. åœºæ™¯2
```

## ğŸ“ æ–‡ä»¶å¤¹ç»“æ„ç¤ºä¾‹

### åœºæ™¯ 1ï¼šå¤åˆ¶ç°æœ‰ Skill

```
ä½ çš„æœ¬åœ°æ–‡ä»¶å¤¹
â””â”€â”€ æ—¥è®°æ•´ç†/
    â”œâ”€â”€ SKILL.md
    â””â”€â”€ scripts/
        â”œâ”€â”€ process.py
        â””â”€â”€ utils.js

â†“ å¤åˆ¶åˆ° Orca

plugin-data/ai-chat/skills/
â””â”€â”€ æ—¥è®°æ•´ç†/
    â”œâ”€â”€ SKILL.md          â† è‡ªåŠ¨è¯†åˆ«
    â””â”€â”€ scripts/
        â”œâ”€â”€ process.py    â† è‡ªåŠ¨è¯†åˆ«
        â””â”€â”€ utils.js      â† è‡ªåŠ¨è¯†åˆ«
```

### åœºæ™¯ 2ï¼šæ‰‹å†™æ–° Skill

```
ä½ æ‰‹å†™çš„æ–‡ä»¶
â””â”€â”€ çŸ¥è¯†å¡ç‰‡/
    â””â”€â”€ SKILL.md

â†“ æ”¾å…¥ Orca

plugin-data/ai-chat/skills/
â””â”€â”€ çŸ¥è¯†å¡ç‰‡/
    â””â”€â”€ SKILL.md          â† è‡ªåŠ¨è¯†åˆ«
```

### åœºæ™¯ 3ï¼šæ··åˆä½¿ç”¨

```
plugin-data/ai-chat/skills/
â”œâ”€â”€ æ—¥è®°æ•´ç†/             â† å¤åˆ¶çš„
â”‚   â”œâ”€â”€ SKILL.md
â”‚   â””â”€â”€ scripts/
â”œâ”€â”€ çŸ¥è¯†å¡ç‰‡/             â† æ‰‹å†™çš„
â”‚   â””â”€â”€ SKILL.md
â”œâ”€â”€ å‘¨æŠ¥èšåˆ/             â† å¤åˆ¶çš„
â”‚   â”œâ”€â”€ SKILL.md
â”‚   â””â”€â”€ scripts/
â””â”€â”€ è‡ªå®šä¹‰æŠ€èƒ½/           â† æ‰‹å†™çš„
    â””â”€â”€ SKILL.md

â†“ ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«æ‰€æœ‰ 4 ä¸ª Skill
```

## ğŸ”„ è‡ªåŠ¨è¯†åˆ«æµç¨‹

```
ç”¨æˆ·æ“ä½œ
  â†“
SkillManagerModal æ‰“å¼€
  â†“
loadSkillsData() è°ƒç”¨
  â†“
listSkills() æ‰«æ skills/ æ–‡ä»¶å¤¹
  â†“
è·å–æ‰€æœ‰ Skill IDï¼ˆæ–‡ä»¶å¤¹åç§°ï¼‰
  â†“
å¯¹æ¯ä¸ª Skill ID è°ƒç”¨ getSkill()
  â†“
è¯»å– SKILL.md æ–‡ä»¶
  â†“
è§£æå…ƒæ•°æ®å’ŒæŒ‡ä»¤
  â†“
åˆ—å‡ºè„šæœ¬æ–‡ä»¶
  â†“
æ£€æŸ¥å¯ç”¨çŠ¶æ€
  â†“
è¿”å›å®Œæ•´ Skill å¯¹è±¡
  â†“
UI æ˜¾ç¤º Skill åˆ—è¡¨
```

## ğŸ’¡ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šå¯¼å…¥ç°æœ‰ Skill

```bash
# 1. ä½ æœ‰ä¸€ä¸ªç°æˆçš„ Skill æ–‡ä»¶å¤¹
my-skills/
â””â”€â”€ æ—¥è®°æ•´ç†/
    â”œâ”€â”€ SKILL.md
    â””â”€â”€ scripts/
        â””â”€â”€ process.py

# 2. å¤åˆ¶åˆ° Orca çš„ skills æ–‡ä»¶å¤¹
# 3. æ‰“å¼€ SkillManagerModal
# 4. ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«å¹¶æ˜¾ç¤º
```

### åœºæ™¯ 2ï¼šåˆ›å»ºæ–° Skill

```bash
# 1. åˆ›å»ºæ–‡ä»¶å¤¹
mkdir skills/æˆ‘çš„æŠ€èƒ½

# 2. åˆ›å»º SKILL.md
cat > skills/æˆ‘çš„æŠ€èƒ½/SKILL.md << 'EOF'
---
name: æˆ‘çš„æŠ€èƒ½
description: è¿™æ˜¯æˆ‘çš„è‡ªå®šä¹‰æŠ€èƒ½
---

# æˆ‘çš„æŠ€èƒ½

è¿™æ˜¯æŒ‡ä»¤å†…å®¹...
EOF

# 3. æ‰“å¼€ SkillManagerModal
# 4. ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«å¹¶æ˜¾ç¤º
```

### åœºæ™¯ 3ï¼šæ·»åŠ è„šæœ¬

```bash
# 1. åˆ›å»º scripts æ–‡ä»¶å¤¹
mkdir -p skills/æˆ‘çš„æŠ€èƒ½/scripts

# 2. æ·»åŠ è„šæœ¬æ–‡ä»¶
cat > skills/æˆ‘çš„æŠ€èƒ½/scripts/process.py << 'EOF'
def process_data(data):
    return data.upper()
EOF

# 3. æ‰“å¼€ SkillManagerModal
# 4. ç³»ç»Ÿè‡ªåŠ¨è¯†åˆ«è„šæœ¬æ–‡ä»¶
```

## ğŸ¯ è‡ªåŠ¨è¯†åˆ«çš„ä¼˜åŠ¿

1. **é›¶é…ç½®** - æ— éœ€æ³¨å†Œæˆ–é…ç½®ï¼Œæ”¾å…¥å³ç”¨
2. **çµæ´»** - æ”¯æŒä»»æ„æ–‡ä»¶å¤¹åç§°ï¼ˆåŒ…æ‹¬ä¸­æ–‡ï¼‰
3. **å¯æ‰©å±•** - æ”¯æŒä»»æ„è„šæœ¬æ–‡ä»¶å’Œèµ„æº
4. **æ˜“äºå¤‡ä»½** - ç›´æ¥å¤åˆ¶æ–‡ä»¶å¤¹å³å¯å¤‡ä»½
5. **æ˜“äºåˆ†äº«** - ç›´æ¥åˆ†äº«æ–‡ä»¶å¤¹å³å¯

## âš ï¸ æ³¨æ„äº‹é¡¹

### å¿…éœ€æ¡ä»¶

- âœ… æ–‡ä»¶å¤¹åç§° = Skill IDï¼ˆå¯ä»¥æ˜¯ä¸­æ–‡ï¼‰
- âœ… å¿…é¡»æœ‰ `SKILL.md` æ–‡ä»¶
- âœ… `SKILL.md` å¿…é¡»æœ‰ `name` å­—æ®µ

### å¯é€‰æ¡ä»¶

- âœ… å¯ä»¥æœ‰ `scripts/` å­æ–‡ä»¶å¤¹
- âœ… å¯ä»¥æœ‰ä»»æ„è„šæœ¬æ–‡ä»¶
- âœ… å¯ä»¥æœ‰å…¶ä»–èµ„æºæ–‡ä»¶

### ä¸æ”¯æŒ

- âŒ åµŒå¥—æ–‡ä»¶å¤¹ï¼ˆåªæ”¯æŒä¸€å±‚ï¼‰
- âŒ æ²¡æœ‰ `SKILL.md` çš„æ–‡ä»¶å¤¹
- âŒ æ²¡æœ‰ `name` å­—æ®µçš„ Skill

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜ 1ï¼šSkill æ²¡æœ‰è¢«è¯†åˆ«

**åŸå› **ï¼š
- æ–‡ä»¶å¤¹ä¸åœ¨ `skills/` ç›®å½•ä¸‹
- æ²¡æœ‰ `SKILL.md` æ–‡ä»¶
- `SKILL.md` æ²¡æœ‰ `name` å­—æ®µ

**è§£å†³**ï¼š
```bash
# æ£€æŸ¥æ–‡ä»¶å¤¹ç»“æ„
skills/
â””â”€â”€ æˆ‘çš„æŠ€èƒ½/
    â””â”€â”€ SKILL.md  â† å¿…é¡»æœ‰è¿™ä¸ªæ–‡ä»¶

# æ£€æŸ¥ SKILL.md å†…å®¹
---
name: æˆ‘çš„æŠ€èƒ½  â† å¿…é¡»æœ‰ name å­—æ®µ
---
```

### é—®é¢˜ 2ï¼šè„šæœ¬æ–‡ä»¶æ²¡æœ‰è¢«è¯†åˆ«

**åŸå› **ï¼š
- è„šæœ¬ä¸åœ¨ `scripts/` æ–‡ä»¶å¤¹ä¸‹
- æ–‡ä»¶å¤¹åç§°æ‹¼å†™é”™è¯¯

**è§£å†³**ï¼š
```bash
# æ­£ç¡®çš„ç»“æ„
skills/
â””â”€â”€ æˆ‘çš„æŠ€èƒ½/
    â””â”€â”€ scripts/
        â””â”€â”€ process.py  â† å¿…é¡»åœ¨ scripts æ–‡ä»¶å¤¹ä¸‹
```

### é—®é¢˜ 3ï¼šå…ƒæ•°æ®æ²¡æœ‰è¢«è§£æ

**åŸå› **ï¼š
- YAML frontmatter æ ¼å¼é”™è¯¯
- ç¼ºå°‘ `---` åˆ†éš”ç¬¦

**è§£å†³**ï¼š
```markdown
---
name: æˆ‘çš„æŠ€èƒ½
description: æè¿°
---

# æŒ‡ä»¤å†…å®¹
```

## ğŸ“Š è‡ªåŠ¨è¯†åˆ«çš„å·¥ä½œæµç¨‹å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç”¨æˆ·æ‰“å¼€ SkillManagerModal         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  loadSkillsData()                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  listSkills()                       â”‚
â”‚  æ‰«æ skills/ æ–‡ä»¶å¤¹                â”‚
â”‚  è·å–æ‰€æœ‰æ–‡ä»¶å¤¹åç§°                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å¯¹æ¯ä¸ª Skill ID è°ƒç”¨ getSkill()    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¯»å– SKILL.md                      â”‚
â”‚  è§£æå…ƒæ•°æ®å’ŒæŒ‡ä»¤                   â”‚
â”‚  åˆ—å‡ºè„šæœ¬æ–‡ä»¶                       â”‚
â”‚  æ£€æŸ¥å¯ç”¨çŠ¶æ€                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¿”å› Skill å¯¹è±¡æ•°ç»„                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  UI æ˜¾ç¤º Skill åˆ—è¡¨                 â”‚
â”‚  ç”¨æˆ·å¯ä»¥ç¼–è¾‘ã€åˆ é™¤ã€å¯¼å‡ºç­‰         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ‰ æ€»ç»“

ç°åœ¨çš„ Skills ç³»ç»Ÿæ˜¯**å®Œå…¨è‡ªåŠ¨è¯†åˆ«**çš„ï¼š

1. **å¤åˆ¶ Skill** - ç›´æ¥å¤åˆ¶æ–‡ä»¶å¤¹åˆ° `skills/` ç›®å½•
2. **æ‰‹å†™ Skill** - åˆ›å»ºæ–‡ä»¶å¤¹å’Œ `SKILL.md` æ–‡ä»¶
3. **è‡ªåŠ¨åŠ è½½** - æ‰“å¼€ SkillManagerModal æ—¶è‡ªåŠ¨è¯†åˆ«
4. **æ— éœ€é…ç½®** - é›¶é…ç½®ï¼Œå¼€ç®±å³ç”¨

åªè¦ç¬¦åˆæ ¼å¼è¦æ±‚ï¼Œç³»ç»Ÿå°±ä¼šè‡ªåŠ¨è¯†åˆ«å’ŒåŠ è½½ï¼
